<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(~{::title}, ~{::section}, ~{::headResources})}">
<head>
    <title>상세 분석 | E-N-C 안전 시스템</title>
    <th:block th:fragment="headResources">
        <link rel="stylesheet" th:href="@{/css/analysis.css}">
        <script th:inline="javascript">
            /*<![CDATA[*/
            const CAMERA_ID = /*[[${cameraId}]]*/ 'cam-01';
            /*]]>*/
        </script>
        <script defer th:src="@{/js/cameradata.js}"></script>
        <script defer th:src="@{/js/analysis.js}"></script>
    </th:block>
</head>
<body th:with="camId=${cameraId}">
<section class="analysis-header">
    <div class="analysis-header__meta">
        <div>
            <p class="analysis-header__subtitle">상세 분석</p>
            <h1 class="analysis-header__title" data-role="camera-name">카메라 이름</h1>
            <p class="analysis-header__location" data-role="camera-location">카메라 위치</p>
        </div>
        <span class="analysis-header__status" data-role="camera-status">상태</span>
    </div>
</section>

<section class="video-stage">
    <figure class="video-player" aria-label="선택된 카메라의 실시간 영상">
        <div class="video-player__display">실시간 스트림 영역</div>
        <div class="video-player__overlay" data-role="video-overlay">
            <div class="overlay-layer" data-layer="bbox"></div>
            <div class="overlay-layer" data-layer="roi" style="display: none;">
                <svg width="100%" height="100%" viewBox="0 0 1600 900" preserveAspectRatio="none">
                    <polygon points="300,800 1300,850 1200,500 800,450 400,550"/>
                </svg>
            </div>
            <div class="overlay-layer heatmap-overlay" data-layer="heatmap" style="display: none;"></div>
        </div>
        <figcaption data-role="video-caption">라이브 · 00:00:00</figcaption>
    </figure>
    <aside class="layer-controls">
        <h2 class="layer-controls__title">분석 레이어</h2>
        <div class="layer-options" data-role="layer-controls">
            <label>
                <input type="checkbox" data-layer-toggle="bbox" checked> 객체 탐지 (Bounding Box)
            </label>
            <label>
                <input type="checkbox" data-layer-toggle="roi"> 동적 ROI (활동 영역)
            </label>
            <label>
                <input type="checkbox" data-layer-toggle="heatmap"> 실시간 히트맵
            </label>
        </div>
    </aside>
</section>

<section class="charts-section">
    <div class="chart-container">
        <header class="chart-header">
            <h2>시계열 패턴 분석</h2>
            <div class="chart-controls" data-role="chart-controls">
                <button class="active" data-range="today">오늘</button>
                <button data-range="yesterday">어제</button>
                <button data-range="average">주중 평균</button>
            </div>
        </header>
        <div class="chart-placeholder" data-role="chart-placeholder">
            시계열 차트 영역 (오늘)
        </div>
    </div>
    <div class="calendar-container">
        <h2>히트맵 캘린더</h2>
        <div class="calendar-placeholder">
            <p>시간대별 평균 밀집도 캘린더 영역</p>
            <p style="margin-top: 1rem; font-size: 0.9rem; color: #909090;">(수요일 점심시간대가 주기적으로 혼잡합니다)</p>
        </div>
    </div>
</section>

</body>
</html>
